<?xml version="1.0" encoding="UTF-8" ?>

<!-- ld31 classes -->

<objects>
	
	<const type="color" name="TorchLight">ffff9900</const>
	
	<class name="Cracks" extends="MovieClip">
		<isPlaying>false</isPlaying>
		<isLooping>false</isLooping>
		<color>ff808080</color>
		<passthrough>
			<keyframe>
				<texture>Texture'cracks'</texture>
				<textureWindow>0,0,0.125,1</textureWindow>
			</keyframe>
			<keyframe>
				<texture>Texture'cracks'</texture>
				<textureWindow>0.125,0,0.25,1</textureWindow>
			</keyframe>
			<keyframe>
				<texture>Texture'cracks'</texture>
				<textureWindow>0.25,0,0.375,1</textureWindow>
			</keyframe>
			<keyframe>
				<texture>Texture'cracks'</texture>
				<textureWindow>0.375,0,0.5,1</textureWindow>
			</keyframe>
			<keyframe>
				<texture>Texture'cracks'</texture>
				<textureWindow>0.5,0,0.625,1</textureWindow>
			</keyframe>
		</passthrough>
	</class>
	
	<class name="ItemBreakParticles" extends="ParticleEmitter">
		<particleTexture>Texture'debris'</particleTexture>
		<cycleDuration>1.5</cycleDuration>
		<destroyWhenAllDead>true</destroyWhenAllDead>
		<rectSpawnArea>(-4,-6,4,6)</rectSpawnArea>
		<baseScale>8</baseScale>
		<particleForce>0,-30.0</particleForce>
		<spawnScaleRange>((0.25),(1.0))</spawnScaleRange>
		<spawnSpeedRange>(0,1)</spawnSpeedRange>
		<velocityDamping>0.1</velocityDamping>
		<startingParticles>40</startingParticles>
		<creationSpawnBurst>true</creationSpawnBurst>
		<creationPauseAfterBurst>true</creationPauseAfterBurst>
		<vecKeyframesScale>[
			{0, (0)},
			{0.15, (1)},
			{1, (0)},
			]</vecKeyframesScale>
		<perParticleColorRange>(Gray,White)</perParticleColorRange>
	</class>
	
	<class name="FloorTileTemplate" extends="TileTemplate">
		<atlasSubTexture>0,0</atlasSubTexture>
		<isSolid>false</isSolid>
		<doesBlockLight>false</doesBlockLight>
	</class>
	
	<class name="LightSourceConfigured" extends="LightSource">
		<lightMask>LightMask'$^_host_light_mask'</lightMask>
		<gradientHost>Sprite'$^_host_light_gradient'</gradientHost>
		<overlay>Sprite'$^_overlay'</overlay>
		
		<overlayRadiusScalar>0.9</overlayRadiusScalar>
		
		<children>
			<object class="DisplayObjectContainer" name="$^_host">
				<maskStencilReadMode>MaskExclusive</maskStencilReadMode>
				<mask>
					<object class="LightMask" name="$^_light_mask">
						<owner>LightSourceConfigured'$^^^'</owner>
						<shaderProgram>ShaderProgram'SP_Pos2Only'</shaderProgram>
						<mesh><object class="SimpleMesh" /></mesh>
					</object>
				</mask>
					
				<children>
					<object class="Sprite" name="$^_light_gradient">
						<shaderProgram>ShaderProgram'SP_LightDiffuse'</shaderProgram>
						<blendMode>Add</blendMode>
						<texture>Texture'light_glow'</texture>
					</object>
				</children>
			</object>
			<object class="Sprite" name="$^_overlay">
				<shaderProgram>ShaderProgram'SP_LightDiffuse'</shaderProgram>
				<blendMode>Add</blendMode>
				<texture>Texture'light_glow'</texture>
			</object>
		</children>
	</class>
	
	<class name="LightTorch" extends="LightSourceConfigured">
		<color>TorchLight</color>
		<radius>200</radius>
	</class>

	<class name="TileGridDefault" extends="TileGrid">
		<tileClass>ldTile</tileClass>
		<texture>Texture'tile_atlas'</texture>
		<atlasSubdivisions>2,1</atlasSubdivisions>
		<texturesSubdivisionsPerTile>1</texturesSubdivisionsPerTile>
		<tileSize>16</tileSize>
		
		<templates>
			
			<object class="FloorTileTemplate" name="floor_basic">
				<creationColor>ffeaeaea</creationColor>
			</object>
			<object class="FloorTileTemplate" name="floor_tool_spawn_1">
				<creationColor>ff079000</creationColor>
			</object>
			<object class="FloorTileTemplate" name="floor_tool_spawn_2">
				<creationColor>ff42ff00</creationColor>
			</object>
			<object class="FloorTileTemplate" name="floor_tool_spawn_home">
				<creationColor>ffccff00</creationColor>
			</object>
			<object class="FloorTileTemplate" name="floor_immutable">
				<creationColor>fff17c3d</creationColor>
			</object>
			<object class="TileTemplate" name="wall_immutable">
				<atlasSubTexture>1,0</atlasSubTexture>
				<creationColor>ff444444</creationColor>
			</object>
			<object class="TileTemplate" name="wall_really_immutable">
				<atlasSubTexture>1,0</atlasSubTexture>
				<creationColor>ffc65112</creationColor>
			</object>
			
		</templates>
	</class>

	<include url="assets/items.xml" subsume-root="true" />

</objects>

